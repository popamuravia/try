<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì StudentNotify</title>
    <style>
        /* –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –í–ï–°–¨ CSS –ò–ó style.css */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #4361ee; --primary-dark: #3a56d4; /* –∏ —Ç.–¥. */ }
        /* ... –≤–µ—Å—å –≤–∞—à CSS –∫–æ–¥ ... */
    </style>
</head>
<body>
    <!-- üîê –§–û–†–ú–ê –í–•–û–î–ê -->
    <div id="login-form" class="login-container">
        <!-- –≤–∞—à–∞ HTML —Ä–∞–∑–º–µ—Ç–∫–∞ -->
    </div>

    <!-- üè† –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
    <div id="main-interface" class="hidden">
        <!-- –≤–∞—à–∞ HTML —Ä–∞–∑–º–µ—Ç–∫–∞ -->
    </div>

    <script>
        // –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –í–ï–°–¨ JavaScript –ö–û–î –ò–ó app.js
        console.log('üöÄ StudentNotify Static Version');
        
        let currentUser = null;
        let authToken = null;
        
        // üìÅ –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤ localStorage
        class LocalStorage {
            constructor(key) {
                this.key = key;
            }
            
            read() {
                const data = localStorage.getItem(this.key);
                if (data) {
                    return JSON.parse(data);
                }
                
                // –î–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                if (this.key === 'notifications') {
                    const defaultData = {
                        notifications: [
                            {
                                id: 1,
                                title: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ StudentNotify!",
                                content: "–≠—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.",
                                author: "admin",
                                created_at: new Date().toISOString(),
                                is_important: true,
                                tags: ["–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ", "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"]
                            },
                            {
                                id: 2,
                                title: "–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ",
                                content: "–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.",
                                author: "admin",
                                created_at: new Date().toISOString(),
                                is_important: false,
                                tags: ["—Ç–µ—Å—Ç"]
                            }
                        ],
                        next_id: 3
                    };
                    this.write(defaultData);
                    return defaultData;
                }
                
                if (this.key === 'users') {
                    const defaultData = {
                        users: [
                            {
                                id: 1,
                                login: "admin",
                                password: "admin", // –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω—É–∂–Ω–æ —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å!
                                role: "admin",
                                name: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
                            },
                            {
                                id: 2,
                                login: "student", 
                                password: "student",
                                role: "student",
                                name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
                                group: "–ü–ò-21"
                            }
                        ]
                    };
                    this.write(defaultData);
                    return defaultData;
                }
                
                return {};
            }
            
            write(data) {
                localStorage.setItem(this.key, JSON.stringify(data));
            }
        }

        // üîê –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
        async function login() {
            const loginValue = document.getElementById('login').value.trim();
            const passwordValue = document.getElementById('password').value.trim();
            
            if (!loginValue || !passwordValue) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            try {
                const usersStorage = new LocalStorage('users');
                const usersData = usersStorage.read();
                const user = usersData.users.find(u => u.login === loginValue && u.password === passwordValue);
                
                if (user) {
                    // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
                    currentUser = {
                        id: user.id,
                        login: user.login,
                        role: user.role,
                        name: user.name,
                        group: user.group
                    };
                    
                    authToken = 'static-token-' + Date.now();
                    
                    localStorage.setItem('authToken', authToken);
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    showMainInterface();
                    loadNotifications();
                    
                    alert('‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!');
                } else {
                    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
                }
                
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
            }
        }

        // üì¢ –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
        function loadNotifications() {
            try {
                const storage = new LocalStorage('notifications');
                const data = storage.read();
                displayNotifications(data.notifications || []);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
            }
        }

        function displayNotifications(notifications) {
            const container = document.getElementById('notifications-container');
            
            if (!notifications || notifications.length === 0) {
                container.innerHTML = '<div class="empty-state">üì≠ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>';
                return;
            }
            
            const isAdmin = currentUser && currentUser.role === 'admin';
            
            container.innerHTML = notifications.map(notification => `
                <div class="notification-card ${notification.is_important ? 'important' : ''}">
                    <div class="notification-header">
                        <h3>${notification.title}</h3>
                        ${notification.is_important ? '<span class="badge">‚ùó –í–∞–∂–Ω–æ</span>' : ''}
                    </div>
                    <div class="notification-content">${notification.content}</div>
                    <div class="notification-meta">
                        <span>üë§ ${notification.author}</span>
                        <span>üìÖ ${new Date(notification.created_at).toLocaleString()}</span>
                        ${isAdmin ? `<button onclick="deleteNotification(${notification.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>` : ''}
                    </div>
                </div>
            `).join('');
        }

        async function createNotification() {
            if (!currentUser || currentUser.role !== 'admin') {
                alert('‚ùå –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');
                return;
            }
            
            const title = document.getElementById('notification-title').value.trim();
            const content = document.getElementById('notification-content').value.trim();
            const is_important = document.getElementById('notification-important').checked;
            
            if (!title || !content) {
                alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ');
                return;
            }
            
            try {
                const storage = new LocalStorage('notifications');
                const data = storage.read();
                
                const newNotification = {
                    id: data.next_id++,
                    title,
                    content,
                    author: currentUser.login,
                    created_at: new Date().toISOString(),
                    is_important,
                    tags: ['–æ–±—â–µ–µ']
                };
                
                data.notifications.push(newNotification);
                storage.write(data);
                
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                document.getElementById('notification-title').value = '';
                document.getElementById('notification-content').value = '';
                document.getElementById('notification-important').checked = false;
                
                loadNotifications();
                alert('‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ!');
                
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        function deleteNotification(id) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ?')) return;
            
            const storage = new LocalStorage('notifications');
            const data = storage.read();
            
            data.notifications = data.notifications.filter(n => n.id !== id);
            storage.write(data);
            
            loadNotifications();
            alert('‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ!');
        }

        // üé® –£–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–û–ú
        function showMainInterface() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('main-interface').classList.remove('hidden');
            
            const userInfo = document.getElementById('user-info');
            const roleIcon = currentUser.role === 'admin' ? 'üë®‚Äçüíº' : 'üë®‚Äçüéì';
            userInfo.textContent = `${roleIcon} ${currentUser.name}`;
            
            if (currentUser.role === 'admin') {
                document.getElementById('admin-panel').classList.remove('hidden');
            }
            
            loadNotifications();
        }

        function showLoginForm() {
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('main-interface').classList.add('hidden');
        }

        function logout() {
            currentUser = null;
            authToken = null;
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            showLoginForm();
        }

        function checkAuth() {
            const savedToken = localStorage.getItem('authToken');
            const savedUser = localStorage.getItem('currentUser');
            
            if (savedToken && savedUser) {
                authToken = savedToken;
                currentUser = JSON.parse(savedUser);
                showMainInterface();
            } else {
                showLoginForm();
            }
        }

        // üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Enter
            document.getElementById('login')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            document.getElementById('password')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            checkAuth();
        });

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        window.login = login;
        window.logout = logout;
        window.createNotification = createNotification;
        window.deleteNotification = deleteNotification;
    </script>
</body>
</html>